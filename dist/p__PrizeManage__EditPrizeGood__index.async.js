"use strict";(self.webpackChunkumi_yiyuangou=self.webpackChunkumi_yiyuangou||[]).push([[774],{10426:function(ue,A,e){e.r(A),e.d(A,{default:function(){return ae}});var L=e(57213),f=e.n(L),W=e(25359),d=e.n(W),k=e(49811),h=e.n(k),H=e(54306),F=e.n(H),J=e(16915),y=e(16950),Q=e(90579),V=e(9845),x=e(28912),Y=e(49919),K=e(17576),p=e(50959),X=e(50979),s=e(11527),b=["fieldProps","proFieldProps"],w=function(m,S){var C=m.fieldProps,z=m.proFieldProps,P=(0,K.Z)(m,b);return(0,s.jsx)(X.Z,(0,Y.Z)({ref:S,valueType:"textarea",fieldProps:C,proFieldProps:z},P))},D=p.forwardRef(w),q=e(50252),N=e(93889),Z=e(25107),_=e(51431),le=e(47e3),ee=e(32699),j=e.n(ee),I={bg:"bg___riB7Y",back:"back___ehQvJ"},o="TUab",ae=function(){var E=(0,p.useState)(),m=F()(E,2),S=m[0],C=m[1],z=(0,p.useState)(),P=F()(z,2),O=P[0],R=P[1],re=(0,Z.useModel)("global"),T=re.refresh,U=(0,Z.useLocation)(),ne=x.A.useForm(),te=F()(ne,1),G=te[0],v=(0,Q.m)(U.search);console.log(U);var se=function(){var i=h()(d()().mark(function r(n){var a,u;return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,y.OW)(n);case 2:a=l.sent,u=a.flag,u&&(_.ZP.success("\u64CD\u4F5C\u6210\u529F"),history.back(),T==null||T.reload());case 5:case"end":return l.stop()}},r)}));return function(n){return i.apply(this,arguments)}}(),oe=function(){var i=h()(d()().mark(function r(){var n,a,u,t;return d()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,y.uH)({prizeId:v.id});case 2:n=c.sent,a=n.data,u=n.flag,u&&(t=f()(f()({},a),{},{image:[{uid:0,name:111,url:a.image}]}),G.setFieldsValue(t),R(a.image));case 6:case"end":return c.stop()}},r)}));return function(){return i.apply(this,arguments)}}(),ie={maxCount:1,accept:"image/*",customRequest:function(){var i=h()(d()().mark(function n(a){var u,t,l,c,$,M,B;return d()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return u=a.onSuccess,t=a.file,l=new FormData,l.append("file",t),c=J.q.getItem(),g.next=6,(0,y.e$)({file:t,authorization:c});case 6:$=g.sent,M=$.data,B=$.flag,B&&(u(t),R(M));case 10:case"end":return g.stop()}},n)}));function r(n){return i.apply(this,arguments)}return r}()};return(0,p.useEffect)(function(){j().isNil(v.id)||oe()},[v.id]),(0,s.jsxs)("div",{className:I.bg,_nk:"".concat(o,"11"),children:[(0,s.jsxs)("a",{className:I.back,onClick:function(){history.back()},_nk:"".concat(o,"21"),children:[(0,s.jsx)(V.Z,{_nk:"".concat(o,"31")}),"\u8FD4\u56DE"]}),(0,s.jsxs)(x.A,{form:G,onFinish:function(){var i=h()(d()().mark(function r(n){var a;return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=j().isNil(v.id)?f()(f()({},n),{},{image:O}):f()(f()({},n),{},{prizeId:v.id,image:O}),se(a);case 2:case"end":return t.stop()}},r)}));return function(r){return i.apply(this,arguments)}}(),_nk:"".concat(o,"41"),children:[(0,s.jsx)(D,{name:"prizeName",width:800,label:"\u5956\u54C1\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5956\u54C1\u540D\u79F0"}],_nk:"".concat(o,"51")}),(0,s.jsx)(q.Z,{name:"".concat(j().isNil(v.id)?"image_0":"image"),max:1,fieldProps:f()({name:"file",listType:"picture-card"},ie),label:"\u5956\u54C1logo",onChange:function(r){C(r.file.name)},extra:S,rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u56FE\u7247"}],_nk:"".concat(o,"61")}),(0,s.jsxs)(x.A.Group,{_nk:"".concat(o,"71"),children:[(0,s.jsx)(N.Z,{name:"unitPrice",width:"xs",label:"\u5956\u54C1\u5355\u4EF7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5956\u54C1\u5355\u4EF7"}],_nk:"".concat(o,"81")}),(0,s.jsx)(N.Z,{name:"openPrice",width:"xs",label:"\u5F00\u5956\u91D1\u989D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5F00\u5956\u91D1\u989D"}],_nk:"".concat(o,"82")})]}),(0,s.jsx)(D,{name:"remark",width:800,label:"\u5907\u6CE8",_nk:"".concat(o,"52")})]})]})}}}]);
